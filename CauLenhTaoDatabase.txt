create database quanlythuvien
go
use quanlythuvien


CREATE TABLE TacGia (
    MaTacGia INT IDENTITY(1,1) PRIMARY KEY ,
    TenTacGia NVARCHAR(255) NOT NULL,
    GhiChu NVARCHAR(255)
);

CREATE TABLE TheLoai (
    MaTheLoai INT IDENTITY(1,1) PRIMARY KEY,
    TenTheLoai NVARCHAR(255) NOT NULL
);

CREATE TABLE NhaXuatBan (
    MaNXB INT IDENTITY(1,1) PRIMARY KEY,
    TenNXB NVARCHAR(255) NOT NULL,
    DiaChi NVARCHAR(255),
    Email NVARCHAR(255),
	ThongTinNDD NVARCHAR(255)
);

CREATE TABLE Sach (
    MaSach INT IDENTITY(1,1) PRIMARY KEY,
    TenSach NVARCHAR(255) NOT NULL,
    MaTacGia INT NOT NULL,
    MaTheLoai INT NOT NULL,
    MaNXB INT NOT NULL,
    NamXB INT NOT NULL,
    FOREIGN KEY (MaTacGia) REFERENCES TacGia(MaTacGia),
    FOREIGN KEY (MaTheLoai) REFERENCES TheLoai(MaTheLoai),
    FOREIGN KEY (MaNXB) REFERENCES NhaXuatBan(MaNXB)
);
CREATE TABLE DocGia (
    MaDocGia INT IDENTITY(1,1) PRIMARY KEY,
    TenDocGia NVARCHAR(255) NOT NULL,
    DiaChi NVARCHAR(255),
    SoThe INT NOT NULL
);

CREATE TABLE TheThuVien (
    SoThe INT IDENTITY(1,1) PRIMARY KEY,
    NgayBatDau DATE NOT NULL,
    NgayHetHan DATE NOT NULL,
    GhiChu NVARCHAR(255)
);

CREATE TABLE NhanVien (
    MaNhanVien INT IDENTITY(1,1) PRIMARY KEY,
    HoTen NVARCHAR(255) NOT NULL,
    NgaySinh DATE,
    SoDienThoai NVARCHAR(20)
);

CREATE TABLE MuonTra (
    MaMuonTra INT IDENTITY(1,1) PRIMARY KEY,
    SoThe INT NOT NULL,
    MaNhanVien INT NOT NULL,
    NgayMuon DATE NOT NULL,
    DaTra BIT NOT NULL,
    NgayTra DATE
);

CREATE TABLE ChiTietMuonTra (
    MaMuonTra INT NOT NULL,
    MaSach INT NOT NULL,
    GhiChu NVARCHAR(255),
    PRIMARY KEY (MaMuonTra, MaSach),
    FOREIGN KEY (MaMuonTra) REFERENCES MuonTra(MaMuonTra),
    FOREIGN KEY (MaSach) REFERENCES Sach(MaSach)
);
